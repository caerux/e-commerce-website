<div class="container mt-5 pt-3" *ngIf="product; else notFound">
  <div
    class="row justify-content-center align-items-center"
    style="min-height: 80vh"
  >
    <!-- Product Image Section -->
    <div class="col-12 col-md-4 d-flex justify-content-center">
      <img
        [src]="product.searchImage"
        [alt]="product.name"
        class="img-fluid shadow-sm rounded"
        style="max-height: 600px"
      />
    </div>

    <!-- Product Details Section -->
    <div class="col-12 col-md-8 p-5">
      <h1>{{ product.name }}</h1>
      <p class="text-muted">{{ product.additionalInfo }}</p>
      <p><strong>Brand:</strong> {{ product.brand }}</p>

      <!-- Rating with stars -->
      <p>
        <strong>Rating:</strong>
        <!-- <span *ngFor="let star of fullStars" class="text-warning">&#9733;</span> -->
        <span *ngIf="halfStar" class="text-warning">&#9734;</span>
        ({{ product.rating | number : "1.1-1" }} / 5,
        {{ product.reviews }} reviews)
      </p>

      <!-- Price Section -->
      <p>
        <strong>Price:</strong>
        <span class="ms-2">{{ product.price | currency }}</span>
        <span class="text-decoration-line-through">{{
          product.mrp | currency
        }}</span>
        <span class="text-success ms-2">{{
          product.discountDisplayLabel
        }}</span>
      </p>

      <!-- Color Section -->
      <div class="mb-3">
        <p><strong>Color:</strong> {{ product.color }}</p>
      </div>

      <!-- Size Dropdown Section -->
      <div class="d-flex align-items-center mb-3">
        <label for="sizeSelect" class="form-label me-3 align-items-center"
          ><strong>Size:</strong></label
        >
        <select
          id="sizeSelect"
          class="form-select form-select-sm w-auto"
          [(ngModel)]="selectedSize"
          aria-label="Select Size"
        >
          <option *ngFor="let size of sizesArray" [value]="size">
            {{ size }}
          </option>
        </select>
      </div>

      <!-- Quantity Controls -->
      <div class="mt-4">
        <div *ngIf="quantity > 0; else addToCartButton">
          <div class="d-flex align-items-center">
            <button
              class="btn btn-outline-secondary"
              (click)="decreaseQuantity()"
            >
              -
            </button>
            <span class="mx-3">{{ quantity }}</span>
            <button
              class="btn btn-outline-secondary"
              (click)="increaseQuantity()"
            >
              +
            </button>
          </div>
        </div>

        <!-- Add to Cart Button -->
        <ng-template #addToCartButton>
          <button class="btn btn-primary btn-lg" (click)="addToCart()">
            Add to Cart
          </button>
        </ng-template>
      </div>

      <!-- View Cart Button -->
      <div class="mt-3" *ngIf="quantity > 0">
        <button class="btn btn-success" (click)="viewCart()">View Cart</button>
      </div>
    </div>
  </div>
</div>

<!-- Not Found Template -->
<ng-template #notFound>
  <div
    class="d-flex justify-content-center align-items-center"
    style="height: 50vh"
  >
    <p>{{ errorMessage }}</p>
  </div>
</ng-template>
