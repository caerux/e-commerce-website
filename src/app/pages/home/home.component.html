<div class="container-fluid mt-5 pt-3">
  <div class="row">
    <!-- Toggle Filters Button for Small Screens -->
    <div class="col-12 mb-3 d-md-none">
      <button class="btn btn-primary" (click)="toggleFilters()">
        {{ showFilters ? "" : "Show Filters" }}
      </button>
    </div>

    <!-- Filter Sidebar for Large Screens -->
    <div class="col-12 col-md-3 col-xxl-2 d-none d-md-block">
      <app-filter-sidebar
        [availableBrands]="availableBrands"
        [availableCategories]="availableCategories"
        [availableColors]="availableColors"
        [availableGenders]="availableGenders"
        [selectedFilters]="selectedFilters"
        (filterChange)="onFilterChange($event.filterType, $event.filterValue)"
        (clearFilters)="onClearFilters()"
      ></app-filter-sidebar>
    </div>

    <!-- Offcanvas Sidebar for Small Screens -->
    <div
      class="offcanvas offcanvas-start d-md-none"
      tabindex="-1"
      id="filtersSidebarMobile"
      [ngClass]="{ show: showFilters }"
    >
      <div class="offcanvas-body">
        <app-filter-sidebar
          [availableBrands]="availableBrands"
          [availableCategories]="availableCategories"
          [availableColors]="availableColors"
          [availableGenders]="availableGenders"
          [selectedFilters]="selectedFilters"
          (filterChange)="onFilterChange($event.filterType, $event.filterValue)"
          (clearFilters)="onClearFilters()"
          (closeSidebar)="toggleFilters()"
        ></app-filter-sidebar>
      </div>
    </div>

    <!-- Overlay for Small Screens -->
    <div
      class="overlay d-md-none"
      [ngClass]="{ show: showFilters }"
      (click)="toggleFilters()"
    ></div>

    <!-- Products Grid -->
    <div class="col-12 col-md-9 col-xxl-10">
      <div class="row">
        <div
          class="col-12 col-sm-6 col-lg-4 col-xxl-3 mb-4"
          *ngFor="let product of filteredProducts"
        >
          <app-product-card [product]="product"></app-product-card>
        </div>
      </div>
    </div>
  </div>
</div>
